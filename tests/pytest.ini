[tool:pytest]
minversion = 6.0
addopts = 
    -ra
    -q
    --strict-markers
    --strict-config
    --cov=harborai
    --cov-report=html:reports/coverage/html
    --cov-report=xml:reports/coverage/coverage.xml
    --html=reports/html/report.html
    --self-contained-html
    --alluredir=reports/allure
    --tb=short
    --maxfail=5
    -p no:warnings

testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

markers =
    unit: Unit tests
    integration: Integration tests
    performance: Performance tests
    security: Security tests
    slow: Slow tests
    critical: Critical tests
    p0: P0 priority tests
    p1: P1 priority tests
    p2: P2 priority tests
    p3: P3 priority tests
    deepseek: DeepSeek related tests
    ernie: ERNIE related tests
    doubao: Doubao related tests
    reasoning: Reasoning model tests
    non_reasoning: Non-reasoning model tests
    async_test: Async tests
    stream_test: Stream tests
    mock: Mock tests (default execution)
    real_api: Real API tests (manual enable required)

    reasoning_content: Reasoning content detection tests
    structured_output: Structured output tests
    native_schema: Native Schema tests
    agently_schema: Agently Schema tests
    resource_monitoring: Resource monitoring tests
    fallback_strategy: Fallback strategy tests
    cost_tracking: Cost tracking tests
    error_robustness: Error robustness tests
    parameter_passthrough: Parameter passthrough tests

filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning

asyncio_mode = auto