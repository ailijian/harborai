# HarborAI 测试环境配置
# 用于启用所有测试，包括集成测试

# 基础配置
HARBORAI_DEBUG=true
HARBORAI_LOG_LEVEL=DEBUG
HARBORAI_ENV=test

# 启用真实API测试（使用模拟）
ENABLE_REAL_API_TESTS=true

# 启用真实数据库测试（使用模拟）
ENABLE_REAL_DB_TESTS=true

# 启用真实Docker测试（使用模拟）
ENABLE_REAL_DOCKER_TESTS=true

# 测试数据库配置（模拟）
TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_NAME=harborai_test
TEST_DB_USER=postgres
TEST_DB_PASSWORD=password

# 真实API密钥（用于端到端测试）
WENXIN_API_KEY=bce-v3/ALTAK-zOkbkPd1PRzUP9Vlnv4iT/70d795c8c18da64a63a357228ff0c66c9bf3032a
WENXIN_BASE_URL=https://qianfan.baidubce.com/v2

DEEPSEEK_API_KEY=sk-d996b310528f44ffb1d7bf5b23b5313b
DEEPSEEK_BASE_URL=https://api.deepseek.com

DOUBAO_API_KEY=4ed46be9-4eb4-45f1-8576-d2fc3d115026
DOUBAO_BASE_URL=https://ark.cn-beijing.volces.com/api/v3

# 性能配置
HARBORAI_PERFORMANCE_MODE=test
HARBORAI_FAST_PATH=false
HARBORAI_ASYNC_DECORATORS=true
HARBORAI_POSTGRES_LOGGING=false
HARBORAI_DETAILED_TRACING=false

# 缓存配置
HARBORAI_TOKEN_CACHE=false
HARBORAI_RESPONSE_CACHE=false

# 成本追踪配置
HARBORAI_COST_TRACKING=true

# 内存优化配置
HARBORAI_ENABLE_MEMORY_OPTIMIZATION=true
HARBORAI_MEMORY_CACHE_SIZE=100
HARBORAI_MEMORY_OBJECT_POOL_SIZE=10

# =============================================================================
# OpenTelemetry 分布式追踪配置 (测试环境)
# =============================================================================

# Protobuf 实现方式 (python/cpp)
# 设置为 python 以解决 OpenTelemetry 与新版 protobuf 的兼容性问题
PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python

# 是否启用 OpenTelemetry 追踪 (true/false)
OTEL_ENABLED=true

# OpenTelemetry 服务名称
OTEL_SERVICE_NAME=harborai-test

# OpenTelemetry 服务版本
OTEL_SERVICE_VERSION=1.0.0-test

# OpenTelemetry 环境标识
OTEL_ENVIRONMENT=test

# OpenTelemetry 资源属性 (键值对，逗号分隔)
OTEL_RESOURCE_ATTRIBUTES=service.name=harborai-test,service.version=1.0.0-test,deployment.environment=test

# =============================================================================
# OpenTelemetry 导出器配置 (测试环境)
# =============================================================================

# 测试环境使用控制台导出器，便于调试
OTEL_EXPORTER_CONSOLE_ENABLED=true

# OTLP 导出器端点 (测试环境可选)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# OTLP 导出器协议 (grpc/http/json)
OTEL_EXPORTER_OTLP_PROTOCOL=grpc

# =============================================================================
# OpenTelemetry 采样配置 (测试环境)
# =============================================================================

# 测试环境采样所有追踪以便完整测试
OTEL_TRACES_SAMPLER=traceidratio
OTEL_TRACES_SAMPLER_ARG=1.0

# =============================================================================
# OpenTelemetry 仪表化配置 (测试环境)
# =============================================================================

# 启用所有仪表化以便完整测试
OTEL_PYTHON_FASTAPI_INSTRUMENTATION_ENABLED=true
OTEL_PYTHON_HTTPX_INSTRUMENTATION_ENABLED=true
OTEL_PYTHON_SQLALCHEMY_INSTRUMENTATION_ENABLED=true
OTEL_PYTHON_REDIS_INSTRUMENTATION_ENABLED=true

# 测试环境可以记录更多详细信息
OTEL_PYTHON_SQLALCHEMY_RECORD_STATEMENTS=true
OTEL_PYTHON_HTTPX_RECORD_REQUEST_BODY=false
OTEL_PYTHON_HTTPX_RECORD_RESPONSE_BODY=false