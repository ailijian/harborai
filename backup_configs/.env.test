# HarborAI 测试项目环境变量配置
# 此文件包含测试环境所需的所有环境变量

# ================================
# 数据库配置
# ================================
# PostgreSQL 测试数据库配置
DB_HOST=localhost
DB_PORT=5433
DB_NAME=harborai_test
DB_USER=test_user
DB_PASSWORD=test_password
DB_SCHEMA=public
DB_SSL_MODE=disable

# 数据库连接池配置
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=30
DB_IDLE_TIMEOUT=300

# ================================
# Redis 配置
# ================================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TIMEOUT=5

# ================================
# 应用配置
# ================================
# 应用环境
ENVIRONMENT=test
DEBUG=true
LOG_LEVEL=DEBUG

# API 配置
API_HOST=localhost
API_PORT=8001
API_PREFIX=/api/v1
API_TIMEOUT=30

# JWT 配置（测试用）
JWT_SECRET_KEY=test_jwt_secret_key_for_harborai_testing_only
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ================================
# AI 服务配置
# ================================
# OpenAI API 配置（测试用mock）
OPENAI_API_KEY=test_openai_api_key
OPENAI_API_BASE=http://localhost:8002/mock/openai
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_TIMEOUT=60

# 向量数据库配置（测试用）
VECTOR_DB_HOST=localhost
VECTOR_DB_PORT=19530
VECTOR_DB_NAME=harborai_test_vectors

# ================================
# 文件存储配置
# ================================
# 本地文件存储配置
FILE_STORAGE_TYPE=local
FILE_STORAGE_PATH=./tests/data/uploads
FILE_MAX_SIZE=10485760  # 10MB
FILE_ALLOWED_EXTENSIONS=.txt,.pdf,.doc,.docx,.md

# ================================
# 测试配置
# ================================
# 测试数据配置
TEST_DATA_PATH=./tests/data
TEST_FIXTURES_PATH=./tests/fixtures
TEST_REPORTS_PATH=./tests/reports

# 测试执行配置
TEST_PARALLEL_WORKERS=4
TEST_TIMEOUT=300
TEST_RETRY_COUNT=3
TEST_COVERAGE_THRESHOLD=80

# 性能测试配置
PERF_TEST_DURATION=60
PERF_TEST_USERS=100
PERF_TEST_RAMP_UP=10

# ================================
# 监控配置
# ================================
# Prometheus 配置
PROMETHEUS_HOST=localhost
PROMETHEUS_PORT=9091
PROMETHEUS_METRICS_PATH=/metrics

# Grafana 配置
GRAFANA_HOST=localhost
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=test_admin

# ================================
# 安全测试配置
# ================================
# 安全扫描配置
SECURITY_SCAN_ENABLED=true
SECURITY_SCAN_TIMEOUT=300
SECURITY_SCAN_SEVERITY_THRESHOLD=medium

# 渗透测试配置
PENTEST_TARGET_HOST=localhost
PENTEST_TARGET_PORT=8001
PENTEST_TIMEOUT=600

# ================================
# 邮件服务配置（测试用mock）
# ================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=test@harborai.com
SMTP_PASSWORD=test_password
SMTP_USE_TLS=false
SMTP_USE_SSL=false

# ================================
# 缓存配置
# ================================
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=harborai_test:

# ================================
# 日志配置
# ================================
LOG_FORMAT=json
LOG_FILE_PATH=./tests/logs/test.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# ================================
# 其他配置
# ================================
# 时区配置
TIMEZONE=Asia/Shanghai

# 语言配置
LANGUAGE=zh-CN
LOCALE=zh_CN.UTF-8

# 测试标识
TEST_RUN_ID=test_run_$(date +%Y%m%d_%H%M%S)
TEST_ENVIRONMENT_NAME=local_test